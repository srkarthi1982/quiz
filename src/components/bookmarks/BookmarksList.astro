---
import { AvCard } from "@ansiversa/components";
import BookmarkButton from "./BookmarkButton.astro";

interface Item {
  entityId: string;
  platformTitle: string;
  platformDescription?: string;
  platformQCount?: number;
}

interface Props {
  items: Item[];
}

const { items } = Astro.props as Props;
---

<div class="bookmarks-list">
  {items.map((item) => (
    <AvCard className="bookmarks-list__card">
      <div class="bookmarks-list__row">
        <div>
          <a class="bookmarks-list__title" href={`/quiz?platformId=${item.entityId}`}>{item.platformTitle}</a>
          <p class="bookmarks-list__meta">{item.platformQCount ? `${item.platformQCount.toLocaleString()} questions` : "Questions unavailable"}</p>
          {item.platformDescription ? <p class="bookmarks-list__desc">{item.platformDescription}</p> : null}
        </div>
        <BookmarkButton
          entityType="platform"
          entityId={item.entityId}
          label={item.platformTitle}
          active={true}
          activeExpr="true"
          onToggle={`toggleBookmarkItem('${item.entityId}', ${JSON.stringify(item.platformTitle)})`}
          size="sm"
        />
      </div>
    </AvCard>
  ))}
</div>

<style>
  .bookmarks-list { display: grid; gap: 0.85rem; }
  .bookmarks-list__row { display: flex; justify-content: space-between; align-items: flex-start; gap: 0.75rem; }
  .bookmarks-list__title { color: #e2e8f0; font-weight: 600; text-decoration: none; }
  .bookmarks-list__meta { font-size: 0.75rem; color: #7dd3fc; margin-top: 0.35rem; }
  .bookmarks-list__desc { margin-top: 0.4rem; color: #94a3b8; font-size: 0.82rem; }
</style>
